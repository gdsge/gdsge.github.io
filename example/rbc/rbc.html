<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Getting Started - A Simple RBC Model &mdash; GDSGE Homepage</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Comparison with OccBin: A Simple Model with an Occasionally Binding Interest Rate ZLB" href="../simple_zlb/simple_zlb.html" />
    <link rel="prev" title="Lectures" href="../../lectures.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> GDSGE
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lectures.html">Lectures</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started - A Simple RBC Model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-model">The Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-gmod-file">The gmod File</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dissecting-the-gmod-file">Dissecting the gmod File</a></li>
<li class="toctree-l2"><a class="reference internal" href="#comparisons-with-dynare">Comparisons with Dynare</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-s-next">What’s Next?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../simple_zlb/simple_zlb.html">Comparison with OccBin: A Simple Model with an Occasionally Binding Interest Rate ZLB</a></li>
<li class="toctree-l1"><a class="reference internal" href="rbcIrr.html">An RBC Model with Irreversible Investment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../HL1996/HL1996.html">Heaton and Lucas (1996): Incomplete Markets with Portfolio Choices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Guvenen2009/Guvenen2009.html">Guvenen (2009): Asset Pricing with Heterogeneous IES</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Bianchi2011/Bianchi2011.html">Bianchi (2011): Sudden Stops in Open Economies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../safe_assets/safe_assets.html">Barro et al. (2017): Safe Assets with Rare Disasters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pandemic/GLSW2020.html">Guerrieri et al. (2020): Negative Supply Shocks That Cause Demand Shortages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../multi_country_rbc/multi_country_rbc.html">A Multi-country Business Cycle Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ZLB/zlb.html">A New-Keynesian Model with an Occasionally Binding Interest Rate Zero Lower Bound</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/functions.html">Toolbox API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AdditionalExamples.html">Additional Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ContributedExamples.html">Contributed Examples</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GDSGE</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Getting Started - A Simple RBC Model</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="getting-started-a-simple-rbc-model">
<h1>Getting Started - A Simple RBC Model<a class="headerlink" href="#getting-started-a-simple-rbc-model" title="Permalink to this heading"></a></h1>
<section id="the-model">
<span id="simplerbc"></span><h2>The Model<a class="headerlink" href="#the-model" title="Permalink to this heading"></a></h2>
<p>The model is a canonical complete-markets Real Business Cycle (RBC) model with a single productivity shock.
This simple model can be approximated with linear solutions well,
so using GDSGE to obatin global non-linear solutions is not necessary.
Nevertheless it serves as a good starting point to illustrate the basic usage of the toolbox,
as this model should be familiar to any macroeconomic audience.</p>
<p>Time is discrete <span class="math notranslate nohighlight">\(t=0...\infty\)</span>. Representative households with mass one maximize utility</p>
<div class="math notranslate nohighlight">
\[\mathbb E \sum_{t=0}^{\infty} \beta^t \frac{c_t^{1-\sigma}}{1-\sigma},\]</div>
<p>where parameter <span class="math notranslate nohighlight">\(\beta&gt;0\)</span> is the discount factor, <span class="math notranslate nohighlight">\(\sigma&gt;0\)</span> is the coefficient of relative risk aversion. <span class="math notranslate nohighlight">\(c_t\)</span> is the consumption. <span class="math notranslate nohighlight">\(\mathbb{E}\)</span> is an expectation operator integrating the productivity shock to be introduced below.</p>
<p>Competitive representative firms produce a single output according to</p>
<div class="math notranslate nohighlight">
\[Y_t=z_t K_t^{\alpha} L_t^{1-\alpha},\]</div>
<p>where parameter <span class="math notranslate nohighlight">\(\alpha \in (0,1)\)</span> is the capital share. <span class="math notranslate nohighlight">\(K_t\)</span> is capital, <span class="math notranslate nohighlight">\(L_t\)</span> is labor, and <span class="math notranslate nohighlight">\(z_t\in\{z_L,z_H\}\)</span> is the productivity shock which follows a two-point Markov process with the following transition matrix</p>
<div class="math notranslate nohighlight">
\[\begin{split}\left(
\begin{aligned}
\pi_{LL} \quad 1-\pi_{LL}\\
1-\pi_{HH} \quad \pi_{HH}
\end{aligned}
\right).\end{split}\]</div>
<p>Capital depreciates at rate <span class="math notranslate nohighlight">\(\delta \in (0,1)\)</span>. Investment technology can convert one unit of output to new capital:</p>
<div class="math notranslate nohighlight">
\[K_{t+1} = K_t(1-\delta) + I_t.\]</div>
<p>Assets markets are complete. Households make investment decision and supply capital and labor to firms. Market clearing conditions for labor and goods are, respectively,</p>
<div class="math notranslate nohighlight">
\[\begin{split}L_t=1, \\
c_t+I_t=Y_t.\end{split}\]</div>
<p>The complete-markets equilibrium can be characterized by the Euler equation and the goods market clearing condition:</p>
<div class="math notranslate nohighlight" id="equation-sequential-equation">
<span class="eqno">(1)<a class="headerlink" href="#equation-sequential-equation" title="Permalink to this equation"></a></span>\[\begin{split}c_t^{-\sigma}=\beta \mathbb{E}_t \left[\left ( \alpha z_{t+1} K_{t+1}^{\alpha-1}+(1-\delta)\right)c_{t+1}^{-\sigma}\right], \\
c_t+K_{t+1} = z_tK_t^{\alpha}+(1-\delta)K_t.\end{split}\]</div>
<p>Given <span class="math notranslate nohighlight">\(K_0\)</span>, a sequential competitive equilibrium is stochastic processes <span class="math notranslate nohighlight">\((c_t,K_{t+1})\)</span> that satisfy system <a class="reference internal" href="#equation-sequential-equation">(1)</a>. To input the system into GDSGE, we need to write the system in a recursive form.</p>
<p>Definition: a recursive competitive equilibrium is functions <span class="math notranslate nohighlight">\(c(z,K), K'(z,K)\)</span> s.t.</p>
<div class="math notranslate nohighlight">
\[\begin{split}c(z,K)^{-\sigma}=\beta \mathbb{E}\left[ \left (\alpha z' [K'(z,K)]^{\alpha-1}+(1-\delta)\right)[c(z',K'(z,K))]^{-\sigma} \Big| z \right]
\\
c(z,K)+K'(z,K)=zK^{\alpha} + (1-\delta)K.\end{split}\]</div>
<p>The recursive system can be solved using a time iteration procedure:</p>
<div class="math notranslate nohighlight">
\[\begin{split}c_t(z,K)^{-\sigma}=\beta \mathbb{E}\left[ \left (\alpha z' [K_t'(z,K)]^{\alpha-1}+(1-\delta)\right)[c_{t+1}(z',K_t'(z,K))]^{-\sigma} \Big| z \right]
\\
c_t(z,K)+K'_t(z,K)=zK^{\alpha} + (1-\delta)K.\end{split}\]</div>
<p>taking function <span class="math notranslate nohighlight">\(c_{t+1}(z,K)\)</span> as known in the period-<span class="math notranslate nohighlight">\(t\)</span> time step.</p>
</section>
<section id="the-gmod-file">
<h2>The gmod File<a class="headerlink" href="#the-gmod-file" title="Permalink to this heading"></a></h2>
<p>The recursive system can now be input to GDSGE via a mod file <a class="reference download internal" download="" href="../../_downloads/60299c62571b1edeefa3c1f38cf92e4f/rbc.gmod"><code class="xref download docutils literal notranslate"><span class="pre">rbc.gmod</span></code></a> below.</p>
<div class="highlight-GDSGE notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c">% Parameters</span>
<span class="linenos"> 2</span><span class="k">parameters</span> beta sigma alpha delta;
<span class="linenos"> 3</span>beta  = 0.99;		<span class="c">% discount factor</span>
<span class="linenos"> 4</span>sigma = 2.0;		<span class="c">% CRRA coefficient</span>
<span class="linenos"> 5</span>alpha = 0.36;		<span class="c">% capital share</span>
<span class="linenos"> 6</span>delta = 0.025;		<span class="c">% depreciation rate</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="c">% Exogenous States</span>
<span class="linenos"> 9</span><span class="k">var_shock</span> z;
<span class="linenos">10</span><span class="k">shock_num</span> = 2;
<span class="linenos">11</span>z_low = 0.99; z_high = 1.01;
<span class="linenos">12</span>Pr_ll = 0.9;  Pr_hh  = 0.9;
<span class="linenos">13</span>z = [z_low,z_high];
<span class="linenos">14</span><span class="k">shock_trans</span> = [
<span class="linenos">15</span>  Pr_ll, 1-Pr_ll
<span class="linenos">16</span>  1-Pr_hh, Pr_hh
<span class="linenos">17</span>  ];
<span class="linenos">18</span>
<span class="linenos">19</span><span class="c">% Endogenous States</span>
<span class="linenos">20</span><span class="k">var_state</span> K;
<span class="linenos">21</span>Kss  = (alpha/(1/beta - 1 + delta))^(1/(1-alpha));
<span class="linenos">22</span>KPts = 101;
<span class="linenos">23</span>KMin = Kss*0.9;
<span class="linenos">24</span>KMax = Kss*1.1;
<span class="linenos">25</span>K    = linspace(KMin,KMax,KPts);
<span class="linenos">26</span>
<span class="linenos">27</span><span class="c">% Interp</span>
<span class="linenos">28</span><span class="k">var_interp</span> c_interp;
<span class="linenos">29</span><span class="k">initial</span> c_interp z.*K.^alpha+(1-delta)*K;
<span class="linenos">30</span><span class="c">% Time iterations update</span>
<span class="linenos">31</span>c_interp = c;
<span class="linenos">32</span>
<span class="linenos">33</span><span class="c">% Endogenous variables as unknowns of equations</span>
<span class="linenos">34</span><span class="k">var_policy</span> c K_next;
<span class="linenos">35</span><span class="k">inbound</span> c       0 z.*K.^alpha+(1-delta)*K;
<span class="linenos">36</span><span class="k">inbound</span> K_next  0 z.*K.^alpha+(1-delta)*K;
<span class="linenos">37</span>
<span class="linenos">38</span><span class="c">% Other endogenous variables</span>
<span class="linenos">39</span><span class="k">var_aux</span> w;
<span class="linenos">40</span>
<span class="linenos">41</span><span class="k">model;</span>
<span class="linenos">42</span>  <span class="c">% Budget constraints</span>
<span class="linenos">43</span>  u_prime = c^(-sigma);
<span class="linenos">44</span>  kret_next&#39; = z&#39;*alpha*K_next^(alpha-1) + 1-delta;
<span class="linenos">45</span>  
<span class="linenos">46</span>  <span class="c">% Evaluate the interpolation object to get future consumption</span>
<span class="linenos">47</span>  c_future&#39; = c_interp&#39;(K_next);
<span class="linenos">48</span>  u_prime_future&#39; = c_future&#39;^(-sigma);
<span class="linenos">49</span>  
<span class="linenos">50</span>  <span class="c">% Calculate residual of the equation</span>
<span class="linenos">51</span>  euler_residual = 1 - beta*<span class="k">GDSGE_EXPECT</span>{u_prime_future&#39;*kret_next&#39;}/u_prime;
<span class="linenos">52</span>  market_clear = z*K^alpha + (1-delta)*K - c - K_next;
<span class="linenos">53</span>  
<span class="linenos">54</span>  <span class="c">% Calcualte other endogenous variables</span>
<span class="linenos">55</span>  w = z*(1-alpha)*K^alpha;
<span class="linenos">56</span>  
<span class="linenos">57</span>  <span class="k">equations;</span>
<span class="linenos">58</span>    euler_residual;
<span class="linenos">59</span>    market_clear;
<span class="linenos">60</span>  <span class="k">end;</span>
<span class="linenos">61</span><span class="k">end;</span>
<span class="linenos">62</span>
<span class="linenos">63</span><span class="k">simulate;</span>
<span class="linenos">64</span>  <span class="k">num_periods</span> = 10000;
<span class="linenos">65</span>  <span class="k">num_samples</span> = 6;
<span class="linenos">66</span>  <span class="k">initial</span> K Kss;
<span class="linenos">67</span>  <span class="k">initial</span> shock 1;
<span class="linenos">68</span>  <span class="k">var_simu</span> c K w;
<span class="linenos">69</span>  K&#39; = K_next;
<span class="linenos">70</span><span class="k">end;</span>
</pre></div>
</div>
<p>The gmod file can be uploaded to the online compiler at <a class="reference external" href="http://www.gdsge.com/">http://www.gdsge.com/</a> (Remember also to download the necessary runtime files following the instruction
on the compiler website).
The compiler returns three files that can be used to solve and simulate the model: iter_rbc.m, simulate_rbc.m, mex_rbc.mexw64.</p>
<p>First, call iter_rbc.m in matlab to run the policy iterations and store the returned result in <em>IterRslt</em>, which produces</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&gt;&gt; IterRslt = iter_rbc;

Iter:10, Metric:0.385607, maxF:9.99011e-09
Elapsed time is 0.174117 seconds.

...

Iter:323, Metric:9.89183e-07, maxF:7.96886e-09
Elapsed time is 0.027923 seconds.
</pre></div>
</div>
<p>where <em>Metric</em> is the maximum absolute distance of <em>var_interp</em> between the current and the last iteration,
and <em>maxF</em> is the maximum absolute equation residual across all collocation points in the current iteration.
As shown, the converged criterion by default is <em>Metric</em> smaller than <span class="math notranslate nohighlight">\(1e-6\)</span>, and can be overwritten by the option <em>TolEq</em> that can be put into the gmod file or
supplied in an option structure when calling <em>iter_rbc</em> (see details below).</p>
<p>The returned IterRslt contains the converged policy and state transition functions. For example, we can plot the policy function for consumption <span class="math notranslate nohighlight">\(c\)</span>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&gt;&gt; plot(IterRslt.var_state.K, IterRslt.var_policy.c);
xlabel(&#39;K&#39;); title(&#39;Policy Functions for c&#39;);
</pre></div>
</div>
<a class="reference internal image-reference" href="../../_images/policy_c.png"><img alt="../../_images/policy_c.png" src="../../_images/policy_c.png" style="width: 437.5px; height: 328.0px;" /></a>
<p>We can now simulate the model by inputting IterRslt into simulate_rbc:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&gt;&gt; SimuRslt = simulate_rbc(IterRslt);

Periods: 1000
    shock       K       c       w
        2   36.27   2.707   2.448
Elapsed time is 0.642607 seconds.

...

Periods: 10000
    shock       K       c       w
        1   36.71   2.685   2.224
Elapsed time is 0.632642 seconds.
</pre></div>
</div>
<p>The returned SimuRslt contains a panel of simulated paths with num_samples and num_periods specified in the mod file. For example, we can plot the histogram of state variable <span class="math notranslate nohighlight">\(K\)</span>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&gt;&gt; histogram(SimuRslt.K); title(&#39;Histogram for K&#39;);
</pre></div>
</div>
<a class="reference internal image-reference" href="../../_images/histogram_K.png"><img alt="../../_images/histogram_K.png" src="../../_images/histogram_K.png" style="width: 437.5px; height: 328.0px;" /></a>
<p>Or we can plot the first two sample paths of wages for the first 100 periods:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&gt;&gt; plot(SimuRslt.w(1:2,1:100)&#39;); title(&#39;Sample Paths of Wages&#39;);
</pre></div>
</div>
<a class="reference internal image-reference" href="../../_images/sample_path_w.png"><img alt="../../_images/sample_path_w.png" src="../../_images/sample_path_w.png" style="width: 437.5px; height: 328.0px;" /></a>
<p>The iter and simulate files can be reused by passing parameters to be overwritten in a struct. For example,</p>
<div class="highlight-Matlab notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">options</span><span class="p">.</span><span class="n">sigma</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mf">1.5</span><span class="w"> </span><span class="c">% overwrite sigma</span><span class="w"></span>
<span class="n">options</span><span class="p">.</span><span class="n">z</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="mf">0.95</span><span class="p">,</span><span class="mf">1.05</span><span class="p">]</span><span class="w"> </span><span class="c">% making the shock larger</span><span class="w"></span>
<span class="n">IterRslt</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">iter_rbc</span><span class="p">(</span><span class="n">options</span><span class="p">);</span><span class="w"></span>
<span class="n">SimuRslt</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">simulate_rbc</span><span class="p">(</span><span class="n">IterRslt</span><span class="p">,</span><span class="n">options</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Part of the toolbox options can also be overwritten by including them in the struct. See <a class="reference internal" href="../../usage/functions.html#options"><span class="std std-ref">Options</span></a>.</p>
</section>
<section id="dissecting-the-gmod-file">
<h2>Dissecting the gmod File<a class="headerlink" href="#dissecting-the-gmod-file" title="Permalink to this heading"></a></h2>
<p>We now look into each line of rbc.gmod and describe the usage.</p>
<div class="highlight-GDSGE notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c">% Parameters</span>
<span class="linenos">2</span><span class="k">parameters</span> beta sigma alpha delta;
<span class="linenos">3</span>beta  = 0.99;		<span class="c">% discount factor</span>
<span class="linenos">4</span>sigma = 2.0;		<span class="c">% CRRA coefficient</span>
<span class="linenos">5</span>alpha = 0.36;		<span class="c">% capital share</span>
<span class="linenos">6</span>delta = 0.025;		<span class="c">% depreciation rate</span>
</pre></div>
</div>
<p>A line starting with keyword <cite>parameters</cite> declares parameters.
Parameters are variables used in the <em>model</em> block that are invariant across states or over time.
Matlab-style inline comments can be used following a “%”.</p>
<div class="highlight-GDSGE notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 8</span><span class="c">% Exogenous States</span>
<span class="linenos"> 9</span><span class="k">var_shock</span> z;
<span class="linenos">10</span><span class="k">shock_num</span> = 2;
<span class="linenos">11</span>z_low = 0.99; z_high = 1.01;
<span class="linenos">12</span>Pr_ll = 0.9;  Pr_hh  = 0.9;
<span class="linenos">13</span>z = [z_low,z_high];
<span class="linenos">14</span><span class="k">shock_trans</span> = [
<span class="linenos">15</span>  Pr_ll, 1-Pr_ll
<span class="linenos">16</span>  1-Pr_hh, Pr_hh
<span class="linenos">17</span>  ];
</pre></div>
</div>
<p>Exogenous states such as the productivity shock in the RBC model should be declared following keyword <em>var_shock</em>.
The number of states should be specified in variable <em>shock_num</em>.
The Markov transition matrix should be specified in variable <em>shock_trans</em>.
Notice that any Matlab expressions such as <code class="code docutils literal notranslate"><span class="pre">z_low</span> <span class="pre">=</span> <span class="pre">0.99</span></code> can be evaluated outside the <em>model</em> block.</p>
<p>For multi-dimension exogenous states, <em>shock_num</em> needs to be specified as the number of discretze points in the Cartesian set across
all dimensions. <em>shock_trans</em> should be specified as the full transition matrix accordingly.
Matlab functions <em>ndgrid</em> and <em>kron</em> can be used to construct the Cartesian set and the full transition matrix.</p>
<p>If an exogenous state follows a continuous process such as AR(1), specify the state to be an endogenous state instead in <em>var_state</em>,
and discretize the innovation.</p>
<div class="highlight-GDSGE notranslate"><div class="highlight"><pre><span></span><span class="linenos">19</span><span class="c">% Endogenous States</span>
<span class="linenos">20</span><span class="k">var_state</span> K;
<span class="linenos">21</span>Kss  = (alpha/(1/beta - 1 + delta))^(1/(1-alpha));
<span class="linenos">22</span>KPts = 101;
<span class="linenos">23</span>KMin = Kss*0.9;
<span class="linenos">24</span>KMax = Kss*1.1;
<span class="linenos">25</span>K    = linspace(KMin,KMax,KPts);
</pre></div>
</div>
<p>Endogenous states such as capital in the RBC model should be declared following keyword <em>var_state</em>.
Then the discretized grid for each state should be specified (e.g., <code class="code docutils literal notranslate"><span class="pre">K</span> <span class="pre">=</span> <span class="pre">linspace(KMin,KMax,KPts);</span></code> in the example).
Notice that any Matlab expressions (such as function <em>linspace</em> here) can be evaluated.</p>
<p>The discretized grid will be used in fixed-grid function approximation procedures such as splines and linear interpolations.
For adaptive grid methods, only the range of the grid will be used.</p>
<div class="highlight-GDSGE notranslate"><div class="highlight"><pre><span></span><span class="linenos">27</span><span class="c">% Interp</span>
<span class="linenos">28</span><span class="k">var_interp</span> c_interp;
<span class="linenos">29</span><span class="k">initial</span> c_interp z.*K.^alpha+(1-delta)*K;
<span class="linenos">30</span><span class="c">% Time iterations update</span>
<span class="linenos">31</span>c_interp = c;
</pre></div>
</div>
<p>The time iteration procedure requires taking the state transition functions (here, implicitly defined in <span class="math notranslate nohighlight">\(c_{t+1}(z,K)\)</span>) as given
when evaluating the system of equations. These state transition functions are declared following keyword <em>var_interp</em>.
They are named <em>var_interp</em> since they are usually evaluated with some function approximation procedure such as interpolation in evaluating the system of equations.</p>
<p>Each of the transition functions needs to be initialized following keyword <em>initial</em>.
Here <span class="math notranslate nohighlight">\(c_{t+1}(z,K)\)</span> is initialized as <span class="math notranslate nohighlight">\(zK^{\alpha} + (1-\delta)K\)</span> which means that consumers just
consumer all resources that include output and non-depreciated capital. This initialization basically
requests the toolbox to find the equilibrium that corresponds to the limit of a finite-horizon economy taking the number of horizons to infinity,
of which <span class="math notranslate nohighlight">\(c_{t+1}\)</span> is initialized to be the last-period solution.
Notice that the Matlab “dot” operator (.*) works in the line following <em>initial</em>, and relevant tensors are formed automatically.</p>
<p>In general, it is crucial to form a good initial guess on the transition functions to make the policy iteration method work.
Starting with a last-period problem is shown to
deliver both good theoretical properties and robust numerical computations (<a class="reference external" href="https://academic.oup.com/ej/article/128/614/2258/5230957">Cao, 2018</a>).
See <a class="reference internal" href="../Mendoza2010/Mendoza2010.html#mendoza2010"><span class="std std-ref">Mendoza (2010)</span></a> for an example on how to define a more complex last-period problem that may require solving a different system of equations, through a <em>model_init</em> block.</p>
<p>The update of the transition function after a time iteration step needs to be specified such as <code class="code docutils literal notranslate"><span class="pre">c_interp</span> <span class="pre">=</span> <span class="pre">c;</span></code>.
The update can use any variables returned as part of the solution to the system in the current time iteration step.
For example, here <code class="code docutils literal notranslate"><span class="pre">c_interp</span> <span class="pre">=</span> <span class="pre">c;</span></code> means that the <em>c_interp</em> variable is updated with <em>c</em> after a time iteration,
where <em>c</em> is one of the policy variables solved by the system of equations, specified in the gmod file as below.</p>
<div class="highlight-GDSGE notranslate"><div class="highlight"><pre><span></span><span class="linenos">33</span><span class="c">% Endogenous variables as unknowns of equations</span>
<span class="linenos">34</span><span class="k">var_policy</span> c K_next;
<span class="linenos">35</span><span class="k">inbound</span> c       0 z.*K.^alpha+(1-delta)*K;
<span class="linenos">36</span><span class="k">inbound</span> K_next  0 z.*K.^alpha+(1-delta)*K;
</pre></div>
</div>
<p>All policy variables that enter the equations as unknowns are declared following keyword <code class="xref std std-declare docutils literal notranslate"><span class="pre">var_policy</span></code>.
For each of these variables, the bounds for where the equation solver searches the solution should be specified
following keyword <em>inbound</em>. For variables of which the bounds cannot be determined ex-ante,
specify tight bounds for them and use an <em>adaptive</em> option so the solver adjusts bounds automatically when it cannot find solutions
and adapt bounds across time iterations. See <code class="xref std std-declare docutils literal notranslate"><span class="pre">var_policy</span></code> in <a class="reference internal" href="../../usage/functions.html#variable-declaration"><span class="std std-ref">Variable declaration</span></a>.</p>
<div class="highlight-GDSGE notranslate"><div class="highlight"><pre><span></span><span class="linenos">38</span><span class="c">% Other endogenous variables</span>
<span class="linenos">39</span><span class="k">var_aux</span> w;
</pre></div>
</div>
<p>Some policy variables can be evaluated as simple functions of states and other policy variables, so they do not have to be
directly included in the system of equations. For example wage is determined by the marginal product of labor
and can be evaluated according to <span class="math notranslate nohighlight">\(w=(1-\alpha)zK^{\alpha}\)</span>. These policy variables can be declared
following keyword <code class="xref std std-declare docutils literal notranslate"><span class="pre">var_aux</span></code>.</p>
<div class="highlight-GDSGE notranslate"><div class="highlight"><pre><span></span><span class="linenos">41</span><span class="k">model;</span>
<span class="linenos">42</span>  <span class="c">% Budget constraints</span>
<span class="linenos">43</span>  u_prime = c^(-sigma);
<span class="linenos">44</span>  kret_next&#39; = z&#39;*alpha*K_next^(alpha-1) + 1-delta;
<span class="linenos">45</span>  
<span class="linenos">46</span>  <span class="c">% Evaluate the interpolation object to get future consumption</span>
<span class="linenos">47</span>  c_future&#39; = c_interp&#39;(K_next);
<span class="linenos">48</span>  u_prime_future&#39; = c_future&#39;^(-sigma);
<span class="linenos">49</span>  
<span class="linenos">50</span>  <span class="c">% Calculate residual of the equation</span>
<span class="linenos">51</span>  euler_residual = 1 - beta*<span class="k">GDSGE_EXPECT</span>{u_prime_future&#39;*kret_next&#39;}/u_prime;
<span class="linenos">52</span>  market_clear = z*K^alpha + (1-delta)*K - c - K_next;
<span class="linenos">53</span>  
<span class="linenos">54</span>  <span class="c">% Calcualte other endogenous variables</span>
<span class="linenos">55</span>  w = z*(1-alpha)*K^alpha;
<span class="linenos">56</span>  
<span class="linenos">57</span>  <span class="k">equations;</span>
<span class="linenos">58</span>    euler_residual;
<span class="linenos">59</span>    market_clear;
<span class="linenos">60</span>  <span class="k">end;</span>
<span class="linenos">61</span><span class="k">end;</span>
</pre></div>
</div>
<p>The <em>model;—end;</em> block defines the system of equations for each collocation point of endogenous states and exogenous states.
For the current example, it simply defines the system of equations for each collocation point <span class="math notranslate nohighlight">\((z,K)\)</span>.</p>
<p>The equations should be eventually specified in the <em>equation;—end;</em> block, in which each line corresponds to one equation in the system.
Any calculations in order to evaluate these equations are included in the <em>model</em> block preceding the <em>equations</em> block.
Notice the whole <em>model</em> block is parsed into C++, so all evaluations should be scalar-based: Matlab functions such as .* operator cannot be used.
Nevertheless, the <em>model</em> block supports simple control-flow blocks in Matlab-style syntax, such as if-elseif-else-end block and
for-end block.</p>
<p>A variable followed by a prime (’) indicates that the variable is a vector of length <em>shock_num</em>.
For example,</p>
<div class="highlight-GDSGE notranslate"><div class="highlight"><pre><span></span><span class="linenos">44</span>  kret_next&#39; = z&#39;*alpha*K_next^(alpha-1) + 1-delta;
</pre></div>
</div>
<p>means that</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>kret_next(1) = z(1)*alpha*K_next^(alpha-1) + 1-delta
kret_next(2) = z(2)*alpha*K_next^(alpha-1) + 1-delta
</pre></div>
</div>
<p>A <cite>var_shock</cite> (here <code class="code docutils literal notranslate"><span class="pre">z</span></code>), when used followed by a prime (‘), corresponds to the vector of the variable across all possible exogenous states, and thus can be
used to construct other vector variables. Notice when a <cite>var_shock</cite> is used not followed by a prime, it corresponds to the exogenous state at the current collocation point, e.g., <code class="code docutils literal notranslate"><span class="pre">z</span></code> in</p>
<div class="highlight-GDSGE notranslate"><div class="highlight"><pre><span></span><span class="linenos">52</span>  market_clear = z*K^alpha + (1-delta)*K - c - K_next;
</pre></div>
</div>
<p>Any <em>var_interp</em> declared before can be used as a function in the model block. For example,</p>
<div class="highlight-GDSGE notranslate"><div class="highlight"><pre><span></span><span class="linenos">47</span>  c_future&#39; = c_interp&#39;(K_next);
</pre></div>
</div>
<p>means calculating <span class="math notranslate nohighlight">\(c_{t+1}\)</span> based on the state transition function implied by <em>c_interp</em>, at
the next-period endogenous state <em>K_next</em> (which is a current policy variable).
Where are the next-period exogenous states? These are taken care of by the prime (’) operator
following <em>c_interp</em>, which means that it is evaluating at each realization of the future exogenous states,
and returning a vector of length shock_num. Accordingly, the left hand side variable should be declared as a vector,
i.e., a variable followed by a prime (‘).</p>
<p>The <em>model</em> block can use several built-in functions for reduction operations.
For example, the <em>GDSGE_EXPECT{}</em> used in</p>
<div class="highlight-GDSGE notranslate"><div class="highlight"><pre><span></span><span class="linenos">51</span>  euler_residual = 1 - beta*<span class="k">GDSGE_EXPECT</span>{u_prime_future&#39;*kret_next&#39;}/u_prime;
</pre></div>
</div>
<p>is to calculate the conditional expectation of the object defined inside the curly braces,
conditional on the current exogenous state, using the default Markov transition matrix <em>shock_trans</em>.
Obviously, this function is meaningful only if it takes as argument the realizations of variables across future exogenous states,
which are defined as vector variables followed by prime (‘).</p>
<p>This operator can also take a different transition matrix than <em>shock_trans</em>, which is used as
<code class="code docutils literal notranslate"><span class="pre">GDSGE_EXPECT{*|alternative_shock_trans}</span></code>. This can be used to solve models with heterogeneous beliefs.
See example <a class="reference internal" href="../Cao2018/Cao2018.html#cao2018"><span class="std std-ref">Cao (2018)</span></a>.</p>
<p>Two other reduction operations <em>GDSGE_MAX{}</em> and <em>GDSGE_MIN{}</em> are defined, which are to take
the maximum and the minimum of objects inside the curly braces, respectively. See <a class="reference internal" href="../../usage/functions.html#built-in-functions"><span class="std std-ref">Built-in functions</span></a>.</p>
<div class="highlight-GDSGE notranslate"><div class="highlight"><pre><span></span><span class="linenos">51</span><span class="k">simulate;</span>
<span class="linenos">52</span>  <span class="k">num_periods</span> = 10000;
<span class="linenos">53</span>  <span class="k">num_samples</span> = 6;
<span class="linenos">54</span>  <span class="k">initial</span> K Kss;
<span class="linenos">55</span>  <span class="k">initial</span> shock 1;
<span class="linenos">56</span>  <span class="k">var_simu</span> c K w;
<span class="linenos">57</span>  K&#39; = K_next;
<span class="linenos">58</span><span class="k">end;</span>
</pre></div>
</div>
<p>The simulate block defines how the file for Monte Carlo simulations should be generated.
It should define the initial endogenous state following keyword <em>initial</em>.
<code class="docutils literal notranslate"><span class="pre">initial</span> <span class="pre">K</span> <span class="pre">Kss;</span></code> in the example sets the endogenous state <span class="math notranslate nohighlight">\(K\)</span> to <em>Kss</em> defined before.</p>
<p>The simulate block should define the initial exogenous state index following keyword <em>initial shock</em>.
It should define the variables to be recorded following <em>var_simu</em>.
It should define the transition for each state variable. In the example, <code class="docutils literal notranslate"><span class="pre">K'=K_next;</span></code>
defines that the next period endogenous state <span class="math notranslate nohighlight">\(K\)</span> should be assigned to <em>K_next</em> which is one of
the <em>var_policy</em> solved as part of the system. Notice the prime operator (’) following <em>K</em>
indicates that the line is to specify the transition of an endogenous state variable in the simulation,
which has a different meaning than the prime operator (’) used in the <em>model</em> block.
Nevertheless, the prime operators (’) in both usages are associated with the transition to the future state, and thus motivate such designs.</p>
<p>The simulate block can also overwrite num_periods (default 1000) and num_samples (default 1).</p>
</section>
<section id="comparisons-with-dynare">
<span id="compare-dynare"></span><h2>Comparisons with Dynare<a class="headerlink" href="#comparisons-with-dynare" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://www.dynare.org/">Dynare</a> is a MATLAB/Octave-based toolbox to solve a wide range of macroeconomic models including DSGE, OLG, perfect foresight and more.
Dynare is specialized in solving DSGE models with local perturbation methods, whereas GDSGE is designed to obtain global solutions.</p>
<p>As perhaps noted by experienced Dynare users, GDSGE follows the many design features of Dynare.
However, due to the nature of global solutions, the gmod code file requires more user input which makes it a bit more lengthy than the Dynare mod file.
In particular, the global solution requires the explicit definition of state variables and the STFPI algorithm requires the update rule for the policy functions, neither
of which are needed by Dynare.</p>
<p>For bridging Dynare users to GDSGE, below is a line-by-line walkthrough to convert the Dynare mod file into the GDSGE gmod file, for the simple RBC model listed here.
Note some of the parameter values and code organizations have been slightly modified from the original gmod file, so as to enable the comparison.
The updated gmod file and and the corresponding Dynare mod file can be downloaded here: <a class="reference download internal" download="" href="../../_downloads/b026d4a3cffe78e32f86b6a421dee8ab/rbc_simple.gmod"><code class="xref download docutils literal notranslate"><span class="pre">rbc_simple.gmod</span></code></a>; <a class="reference download internal" download="" href="../../_downloads/4af642ce7b374abdf43707089327cdcf/rbc_simple.mod"><code class="xref download docutils literal notranslate"><span class="pre">rbc_simple.mod</span></code></a></p>
<a class="reference internal image-reference" href="../../_images/comparison_with_dynare.jpg"><img alt="../../_images/comparison_with_dynare.jpg" src="../../_images/comparison_with_dynare.jpg" style="width: 836.2px; height: 414.0px;" /></a>
<p>In more details:</p>
<ul>
<li><p>Line 2-Line 7: definitions of parameters are exactly the same.</p></li>
<li><p>Line 10-Line 13: the Dynare mod file defines the exogenous shocks
by specifying it to be a <code class="code docutils literal notranslate"><span class="pre">varexo</span></code> and a <code class="code docutils literal notranslate"><span class="pre">var</span></code> in the <code class="code docutils literal notranslate"><span class="pre">shocks</span></code>
block, whereas in the GDSGE gmod file the shock needs to be discretized
into a Markov chain, with the number of discrete values specified
in <code class="code docutils literal notranslate"><span class="pre">shock_num</span></code> and the Markov transition matrix specified in
<code class="code docutils literal notranslate"><span class="pre">shock_trans</span></code>.</p></li>
<li><p>Line 15-Line 22: the Dynare mod file defines all endogenous variables,
regardless of them being state or jump variables, as <code class="code docutils literal notranslate"><span class="pre">var</span></code>. The
GDSGE gmod file needs to breakdown those variables into different
blocks:</p>
<blockquote>
<div><p>(1) <code class="code docutils literal notranslate"><span class="pre">var_state</span></code>: state variables (here, capital stock
<span class="math notranslate nohighlight">\(K\)</span>), with the grid of each state variables explicitly specified
(here, by Line 17).</p>
<p>(2) <code class="code docutils literal notranslate"><span class="pre">var_interp</span></code>: a subset of policy variables
that are necessary to evaluate the inter-temporal equilibrium conditions,
here, consumption <span class="math notranslate nohighlight">\(c\)</span> in order to evaluate the Euler equations, renamed
to be <em>c_interp</em>; the initial value and the update rule for
each of the <code class="code docutils literal notranslate"><span class="pre">var_interp</span></code> also need to be specified (here, by
Line 19 and 20).</p>
<p>(3) <code class="code docutils literal notranslate"><span class="pre">var_policy</span></code>: policy variables that directly
enter the system of equations as unknowns.</p>
<p>(4) <code class="code docutils literal notranslate"><span class="pre">var_aux</span></code>: policy variables that are simple functions of state variables and other policy
variables and can be directly evaluated.</p>
</div></blockquote>
</li>
<li><p>Line 24-Line 34: the model block. In the Dynare model block, all intermediate
variables are defined with a prefix # and all other statements define
an equation of the equilibrium systems. In the GDSGE model block,
instead, each line represents an assignment, and the system of equations
needs to be defined in the <code class="code docutils literal notranslate"><span class="pre">equations</span></code> block explicitly.</p></li>
<li><p>Line 36-Line 43: the model solver. Dynare requires the specification
of the initial value of steady state variables in the <code class="code docutils literal notranslate"><span class="pre">initval</span></code>
block, followed by <code class="code docutils literal notranslate"><span class="pre">steady</span></code> and <code class="code docutils literal notranslate"><span class="pre">stoch_simul</span></code> commands
to solve the steady state and the local solutions. GDSGE does not
require the input of the initial values in most cases; GDSGE solves an equilibrium system at each collocation point
to get the global solution, beyond the steady state. A <code class="code docutils literal notranslate"><span class="pre">simulate</span></code>
block needs to be specified instead, to specify the initial value
and the transition of state variables, which generates codes for Monte-Carlo
simulations.</p></li>
</ul>
</section>
<section id="what-s-next">
<h2>What’s Next?<a class="headerlink" href="#what-s-next" title="Permalink to this heading"></a></h2>
<p>The current example demonstrates the basic usage of the toolbox.
The global solutions obtained by GDSGE can be used to analyze models with highly nonlinear and state-dependent dynamics,
such as models with an occasionally binding borrowing constraint or interest rate zero lower bound.
An alternative method to analyze the nonlinear solutions is the piecewise local solution method, popularized by the method and toolbox
OccBin (<a class="reference external" href="https://www.sciencedirect.com/science/article/pii/S0304393214001238">Guerrieri and Iacoviello, 2015</a>).</p>
<p>We provide an example of an model with an occasionally binding interest rate zero lower bound that can be solved by both
OccBin and GDSGE, to further introduce GDSGE to users who are familiar with Dynare and OccBin. See <a class="reference internal" href="../simple_zlb/simple_zlb.html#simple-zlb"><span class="std std-ref">A Simple Model with an Interest Rate ZLB</span></a>.</p>
<p>You can also proceed to <a class="reference internal" href="rbcIrr.html#an-rbc-model-with-irreversible-investment"><span class="std std-ref">an extension of RBC model with investment irreversibility</span></a> that requires a global method,
or to <a class="reference internal" href="../HL1996/HL1996.html#heaton-and-lucas-1996-incomplete-markets-with-portfolio-choices"><span class="std std-ref">Heaton and Lucas (1996)</span></a> which is the leading example in the toolbox paper.</p>
<p>Or you can proceed to <a class="reference internal" href="../../usage/functions.html#toolbox-api"><span class="std std-ref">Toolbox API</span></a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../lectures.html" class="btn btn-neutral float-left" title="Lectures" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../simple_zlb/simple_zlb.html" class="btn btn-neutral float-right" title="Comparison with OccBin: A Simple Model with an Occasionally Binding Interest Rate ZLB" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Dan Cao, Wenlan Luo, and Guangyu Nie.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>